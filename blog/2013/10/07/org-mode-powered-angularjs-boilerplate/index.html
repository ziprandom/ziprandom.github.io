<!DOCTYPE html>
<html lang="en">
<head>
  <title>Org-Mode Powered AngularJS Boilerplate - random comments</title>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <meta name="author" content="Zip Random" />
  <meta name="description" content="&lt;TODO: insert your description here&gt;" />
  <meta name="keywords" content="" />
  <style>
   #ds-thread #ds-reset .ds-comment-body p {color: #ffffff;}
   #disqus_thread a {color: #00ffff;}
  </style>
  <link rel="stylesheet" media="screen" href="/media/css/font.css" rel="stylesheet" type="text/css"/>
  <link rel="stylesheet" href="/media/css/main.css" type="text/css">
  <link rel="stylesheet" href="/media/css/prettify.css" type="text/css">
  <!-- <link rel="stylesheet" href="/media/css/kdComment.css" type="text/css"> -->
  <!-- <script type="text/javascript"
       src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
       </script> -->
</head>

  <body class="container">
<div>
  <header class="masthead">
    <h1 class="masthead-title"><a href="/">random comments</a></h1>
    <p></p>
    <nav class="site-nav">
      <div class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z" fill="#ffff00"/>
          <path d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z" fill="#ffff00"/>
          <path d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z" fill="#ffff00"/>
        </svg>
      </div>
      <ul class="trigger">
        <li><a href="/blog/">Blog</a></li>
        <li><a href="/tags/">Tags</a></li>
        <li><a href="/about/">About</a></li>
        <li><a href="http://github.com/ziprandom">GitHub</a></li>
        <li><a href="/rss.xml">RSS</a></li>
      </ul>
    </nav>
  </header>
</div>

<div>
<div class="post">
<h1 class="title">Org-Mode Powered AngularJS Boilerplate</h1>
<p>
This is my custom angular.js boilerplate Setup based on Emacs's Org Mode and it´s impressive tangle functionality. You can load this page´s org source code in Emacs and start playing around with angular. After opening the File in an emacs Buffer the elisp source block in the post-processing section has to be evaluated ( C-x C-e after the last parenthesis ) for coffee to be set up correctly.
</p>

<div id="outline-container-orgheadline1" class="outline-2">
<h2 id="orgheadline1">1 Requirements</h2>
<div class="outline-text-2" id="text-orgheadline1">
<ul class="org-ul">
<li>the coffee script compiler (coffee command line tool to translate
coffe-script into java-script)</li>
<li>Emacs 24</li>
<li>org-mode (via M-x install-package inside Emacs)</li>
<li>coffee-mode (via M-x install-package)</li>
</ul>
</div>
</div>

<div id="outline-container-orgheadline2" class="outline-2">
<h2 id="orgheadline2">2 Creating the Dummy</h2>
<div class="outline-text-2" id="text-orgheadline2">
<p>
in this org-files buffer run the command: M-x org-bable-tangleis creates a www directory inside the org-files location with these files:
</p>

<ul class="org-ul">
<li>index.html</li>
<li>project.coffee</li>
<li>project.js</li>
<li>css/style.css</li>
</ul>

<p>
and tries to open the index.html in your browser. Now you can try out <a href="file:///stuff/www/index.html">a very basic angular.js example</a>.
</p>
</div>
</div>

<div id="outline-container-orgheadline3" class="outline-2">
<h2 id="orgheadline3">3 Editing the code</h2>
<div class="outline-text-2" id="text-orgheadline3">
<p>
You can navigate inside any of the code-blocks below and alter it´s contents. As soon as your finished run M-x org-bable-tangle again to export the source-code files. You can edit each code block in a separate buffer with the languages major mode activated by pressing C-c ' with your cursor placed inside the code-block.
</p>
</div>
</div>

<div id="outline-container-orgheadline8" class="outline-2">
<h2 id="orgheadline8">4 Source Code</h2>
<div class="outline-text-2" id="text-orgheadline8">
</div><div id="outline-container-orgheadline4" class="outline-3">
<h3 id="orgheadline4">4.1 Post-Processing (coffee -&gt; js)</h3>
<div class="outline-text-3" id="text-orgheadline4">
<p>
This must be evaluated before the first tangle export in order to setup automatic coffe-script compilation.
</p>

<div class="org-src-container">

<pre class="src src-emacs-lisp">(add-hook 'org-babel-post-tangle-hook
          (
           lambda ()
                  (setq coffee-command "/usr/bin/coffee")
                  (coffee-compile-file)

                  (browse-url (concat
                               "file:" (file-name-directory buffer-file-name)
                               "index.html"))
                  )
          )
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline5" class="outline-3">
<h3 id="orgheadline5">4.2 Html Template</h3>
<div class="outline-text-3" id="text-orgheadline5">
<p>
The index.html associates the &lt;html&gt; tag with the overall app (angular module) and the &lt;body&gt; tag with the MainCtrl. This makes the $scope variables (which includes functions) available inside the &lt;body&gt; tag. The <b>ng-bind</b> attribute binds the contents of the tag to a variable or expression ( {{object.age + 1}} ). Note the very usefull ng-repeat directive. <b>ng-click</b> evaluates the associated expression upon clicking. {{ ... }} Expressions are also used to directly map variables to attributes (id for example). Input fields can be bound to variables via the <b>ng-model</b> directive.
</p>
<div class="org-src-container">

<pre class="src src-emacs-lisp">&lt;!doctype html&gt;
&lt;html ng-app="app"&gt;
  &lt;head&gt;
    &lt;link rel="stylesheet" href="css/style.css"&gt;
    &lt;script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"&gt;&lt;/script&gt;
    &lt;script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.0.8/angular.min.js"&gt;&lt;/script&gt;
    &lt;script src="http://code.angularjs.org/1.0.8/angular-sanitize.min.js"&gt;&lt;/script&gt;
    &lt;script src="project.js"&gt;&lt;/script&gt;
  &lt;/head&gt;
  &lt;body ng-controller="MainCtrl"&gt;
    &lt;div id="table"&gt;
      Click on the table headings for sorting.
      &lt;table class="table-body"&gt;
        &lt;tr&gt;
          &lt;th&gt;&lt;a href="#" ng-class="{bold: sortVar == 'name'}" ng-click="sortVar = 'name'"&gt;Name&lt;/a&gt;&lt;/th&gt;
          &lt;th&gt;&lt;a href="#" ng-class="{bold: sortVar == 'age'}" ng-click="sortVar = 'age'"&gt;Age&lt;/a&gt;&lt;/th&gt;
          &lt;th&gt;&lt;a href="#" ng-class="{bold: sortVar == 'email'}" ng-click="sortVar = 'email'"&gt;Email&lt;/a&gt;&lt;/th&gt;
        &lt;/tr&gt;
        &lt;tr ng-repeat="object in objects | orderBy:sortVar | filter:query" ng-class="object.name" id="{{object.email}}"&gt;
          &lt;td ng-bind="object.name"&gt;&lt;/td&gt;
          &lt;td&gt;&lt;span ng-bind="object.age"&gt;&lt;/span&gt; &lt;a ng-click="object.age = object.age + 1" href="#"&gt;+&lt;/a&gt;  &lt;a ng-click="object.age = object.age - 1" href="#"&gt;-&lt;/a&gt;&lt;/td&gt;

          &lt;td ng-bind="object.email"&gt;&lt;/td&gt;
        &lt;/tr&gt;
    &lt;/div&gt;
    &lt;br/&gt;
    &lt;div id="controlls"&gt;
      Filter Table:
      &lt;input type="text" ng-model="query" /&gt;
    &lt;/div&gt;
  &lt;/body&gt;
&lt;/html&gt;
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline6" class="outline-3">
<h3 id="orgheadline6">4.3 Coffee Script Code</h3>
<div class="outline-text-3" id="text-orgheadline6">
<p>
We define an angular.module an load the ngSanitize module (<a href="http://docs.angularjs.org/api/angular.module">more on angular.js modules</a>) which could enable us to use the bindHtml directive to <i>securely</i> bind html contents to elements (not used in this example).
</p>

<p>
Note also the definition of the MainCtrl Controller. Variables, that we want to be bound into the view have to be children of the $scope object. We may update these bindings via $scope.apply () -&gt; $scope.myCustomVar = "smth". This is not allways necessary, don´t remember when exactly it is. Here we also define an array of objects to iterate over it via the ng-repeat directive in the view.
</p>

<div class="org-src-container">

<pre class="src src-coffee"># (setq coffee-command "coffee -j project.js")
angular.module('app', ['ngSanitize'])
## Controllers
@MainCtrl = ($scope, $http) -&gt;
        $scope.sortVar = 'name'
        $scope.objects = [
                                name: "otto"
                                age: 23
                                email: "der.otto@nowhe.re",

                                   name: "fred"
                                   age: 19
                                   email: "man-fred@nowhe.re",

                                name: "liza"
                                age: 27
                                email: "liza@nowhe.re",

                                   name: "clara"
                                   age: 26
                                   email: "oclara@nowhe.re",

                                name: "mike"
                                age: 23
                                email: "mike@nowhe.re"]
        $scope.query = ""
        $scope.clear = () -&gt;
                  $scope.$apply () -&gt;
                          $scope.query = ""
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline7" class="outline-3">
<h3 id="orgheadline7">4.4 Style.css</h3>
<div class="outline-text-3" id="text-orgheadline7">
<div class="org-src-container">

<pre class="src src-css">.bold {
    font-weight: bold;
}
a {
    text-decoration: none;
}
#table {
    float: left;
}
#controlls {
    float: left;
}
</pre>
</div>
</div>
</div>
</div>

</div>
</div>
<div>
    <div class="post-meta">
      <span title="post date" class="post-info">2013-11-04</span>
      <span title="last modification date" class="post-info">2016-04-28</span>
      <span title="tags" class="post-info"><a href="/tags/emacs/">emacs</a>, <a href="/tags/angular.js/">angular.js</a></span>
      <span title="author" class="post-info">Zip Random</span>
    </div>
  <script src="/media/js/jquery-2.1.3.min.js"></script>
  <script src="/media/js/prettify.js"></script>
  <script src="/media/js/main.js"></script>
  <div class="footer">
    <p>Generated by <a href="http://www.gnu.org/software/emacs/">Emacs</a> 25.x (<a href="http://orgmode.org">Org mode</a> 8.x)</p>
    <p>
      Copyright &copy; 2014 - <span id="footerYear"></span> Zip Random
      &nbsp;&nbsp;-&nbsp;&nbsp;
      Powered by <a href="https://github.com/kelvinh/org-page" target="_blank">org-page</a><br/>
      Themed with <a href="https://github.com/kuangdash/emacs_love" target="_blank">emacs_love (modified)</a>
      <script type="text/javascript">document.getElementById("footerYear").innerHTML = (new Date()).getFullYear();</script>
    </p>
  </div>
      </div>

  </body>
</html>
